// Generated by CoffeeScript 1.10.0
var Sharing;

Sharing = require('../models/sharing');

module.exports.all = function(req, res) {
  return Sharing.pendingBySharedDocType('event', function(err, sharings) {
    if (err) {
      return res.status(500).send({
        error: err
      });
    } else {
      return res.send(sharings);
    }
  });
};

module.exports.fetch = function(req, res, next, id) {
  return Sharing.find(id, function(err, sharing) {
    if (err || !sharing) {
      return res.status(400).send({
        error: "Sharing not found"
      });
    } else {
      req.sharing = sharing;
      return next();
    }
  });
};

module.exports.read = function(req, res) {
  return res.send(req.sharing);
};

module.exports.accept = function(req, res) {
  var data, id;
  data = req.body;
  id = data.id;
  return Sharing.accept(id, function(err, response) {
    if (err) {
      return res.status(500).send({
        error: err
      });
    } else {
      return res.send(data);
    }
  });
};

module.exports.refuse = function(req, res) {
  var data, id;
  data = req.body;
  id = data.id;
  return Sharing.accept(id, function(err, response) {
    if (err) {
      return res.status(500).send({
        error: err
      });
    } else {
      return res.status(204).send(data);
    }
  });
};
